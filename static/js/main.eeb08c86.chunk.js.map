{"version":3,"sources":["utils/auth.js","images/logo.svg","components/Header.js","components/Footer.js","images/trash.svg","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","utils/api.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmPopup.js","components/Register.js","components/Login.js","images/Err.svg","images/Ok.svg","components/InfoTooltip.js","components/ProtectedRoute.js","components/App.js","reportWebVitals.js","index.js"],"names":["BASE_URL","handleOriginalResponse","response","ok","json","console","log","Promise","reject","status","Header","props","className","alt","src","logo","email","to","link","onClick","signOut","title","Footer","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","onCardDelete","bin","onCardClick","name","type","onCardLike","length","Main","onEditAvatar","style","backgroundImage","avatar","id","onEditProfile","about","onAddPlace","cards","map","res","catch","err","api","this","_urlCards","_urlUserInfo","_headers","fetch","method","headers","then","data","body","JSON","stringify","place","cardId","ImagePopup","onClose","String","PopupWithForm","isOpen","onSubmit","children","disabled","isValid","EditProfilePopup","useState","setName","description","setDescription","errorMessage","nameErrorMessage","setNameErrorMessage","jobErrorMessage","setJobErrorMessage","setIsValid","nameRef","useRef","aboutRef","useEffect","current","value","e","preventDefault","onUpdateUser","ref","minLength","maxLength","required","defaultValue","onChange","target","validationMessage","checkValidity","placeholder","EditAvatarPopup","avatarErrorMessage","setAvatarErrorMessage","onUpdateAvatar","AddPlacePopup","placeErrorMessage","setPlaceErrorMessage","linkErrorMessage","setLinkErrorMessage","setErrMessage","onAddPlaceSubmit","ConformPopup","Register","emailInput","passwordInput","onRegister","Login","onLogIn","InfoTooltip","isOk","Ok","Err","ProtectedRoute","Component","component","loggedIn","App","setCurrentUser","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isConfirmPopupOpen","setConfirmPopupOpen","isInfoTooltipOpen","setInfoTooltipOpen","selectedCard","setSelectedCard","cardToDelete","setCardToDelete","setCards","setLoggedIn","tooltip","setTooltip","setEmail","history","useHistory","closeAllPopups","getData","cardsData","jwt","localStorage","getItem","token","tokenCheck","getUserInfo","userInfo","push","Provider","charSet","content","tabIndex","onKeyDown","key","classList","contains","removeItem","addAvatar","resp","setUserInfo","addNewCard","ConfirmPopup","deleteCard","newCards","filter","cardR","exact","path","changeLikeCardStatus","newCard","c","password","auth","setItem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.eeb08c86.chunk.js","sourcesContent":["export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nconst handleOriginalResponse = (response) => {\r\n  if (response.ok){\r\n    //console.log(response);  \r\n  return (response.json());\r\n} else {\r\n    console.log('Ошибка');\r\n    Promise.reject(`Ошибка: ${response.status}`)\r\n    return ('Err')\r\n}\r\n}\r\n\r\nexport const register = (password, email) => {\r\n    console.log(JSON.stringify({\"password\":password, \"email\":email}))\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\"password\":password, \"email\":email})\r\n  })\r\n  .then(handleOriginalResponse)\r\n};\r\n\r\n  export const logIn = (password, email) => {\r\n    console.log(JSON.stringify({\"password\":password, \"email\":email}))\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\"password\":password, \"email\":email})\r\n  })\r\n  .then(handleOriginalResponse)};\r\n\r\n  export const getToken = (token) => {\r\n    //console.log(JSON.stringify({\"password\":password, \"email\":email}))\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`\r\n    }\r\n    //body: JSON.stringify({\"password\":password, \"email\":email})\r\n  })\r\n  .then(handleOriginalResponse)};","export default __webpack_public_path__ + \"static/media/logo.bbe2a6ea.svg\";","import { Link } from 'react-router-dom';\r\nimport logo from '../images/logo.svg';\r\nfunction Header(props){\r\n    function handleSignOut(){\r\n        props.signOut();\r\n    }\r\n    return(\r\n        <header className=\"header\">\r\n            <img alt=\"Лого\" src={logo} className=\"header__logo\"/>\r\n            <div className=\"header__info\">\r\n                <p className=\"header__text\">{props.email}</p>\r\n                <Link to={props.link}><p onClick={props.signOut && handleSignOut} className=\"header__btn\">{props.title}</p></Link>\r\n            </div>\r\n            \r\n        </header>\r\n    )\r\n}\r\nexport default Header;","function Footer(){\r\n    return(\r\n        <footer className=\"footer\">\r\n            <p className=\"footer__creator\">© 2021 Mesto Russia</p>\r\n        </footer>\r\n    )\r\n}\r\nexport default Footer;","export default __webpack_public_path__ + \"static/media/trash.2af49b82.svg\";","import React from \"react\";\r\nexport const CurrentUserContext = React.createContext();\r\n","import bin from \"../images/trash.svg\";\r\nimport React from \"react\";\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nfunction Card(props){\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    const isOwn = props.card.owner._id === currentUser._id;\r\n  \r\n    const cardDeleteButtonClassName = (\r\n        `gallery__trash-bin ${isOwn ? 'gallery__trash-bin_visible' : 'gallery__trash-bin_hidden'}`\r\n      ); \r\n    // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n    const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n\r\n    // Создаём переменную, которую после зададим в `className` для кнопки лайка\r\n    const cardLikeButtonClassName = (\r\n        `gallery__item-like ${isLiked ? 'gallery__item-like_active' : ''}`\r\n      ); \r\n\r\n     function handleClick() {\r\n         props.onCardClick(props.card);\r\n       } \r\n\r\n     function handleLikeClick(){\r\n        props.onCardLike(props.card);\r\n    }\r\n\r\n    function handleDeleteClick(){\r\n        props.onCardDelete(props.card);\r\n    }\r\n    return(\r\n        <div className=\"gallery__item\">\r\n            <img className={cardDeleteButtonClassName} onClick={handleDeleteClick} src={bin} alt=\"Удалить\"/>\r\n            <img alt=\"Картинка\" src={props.card.link } onClick={handleClick} className=\"gallery__item-pic\"/>\r\n                <div className=\"gallery__info\">\r\n                    <h2 className=\"gallery__item-title\">{props.card.name}</h2>\r\n                    <div className=\"gallery__likes\" >\r\n                        <button type=\"button\" onClick={handleLikeClick} className={cardLikeButtonClassName}/>\r\n                        <p className=\"gallery__item-like-amount\">{props.card.likes.length}</p>\r\n                    </div>\r\n                </div>\r\n        </div>\r\n    )\r\n}\r\nexport default Card;","import React from \"react\";\r\nimport Card from \"./Card.js\";\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nfunction Main(props){\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    return(\r\n        <main className=\"content\">\r\n            <section className=\"profile\">\r\n                <div className=\"profile__info\">\r\n                    <div className=\"profile__avatar-overlay\" onClick={props.onEditAvatar}/> \r\n                    <div style={{ backgroundImage: `url(${currentUser.avatar})` }}  className=\"profile__avatar\"/>\r\n                    <div className=\"profile__text-info\">\r\n                        <div className=\"profile__row\">\r\n                            <h1 className=\"profile__name\" id=\"profile__name\">{currentUser.name}</h1>\r\n                            <button type=\"button\" className=\"profile__settings\" onClick={props.onEditProfile} id=\"settings\"/>\r\n                        </div>\r\n                        <p className=\"profile__status\" id=\"profile__status\">{currentUser.about}</p>\r\n                    </div> \r\n                </div>\r\n                <button type=\"button\" id=\"add_btn\" className=\"profile__add-btn\" onClick={props.onAddPlace }/>\r\n            </section>\r\n            <section className=\"gallery\">\r\n                {props.cards.map((card)=>{\r\n                    return(\r\n                        <Card onCardDelete={props.onCardDelete} onCardLike={props.onCardLike} card={card} key={card._id} onCardClick={props.onCardClick}/>\r\n                        )\r\n                })}\r\n            </section>\r\n        </main>\r\n    )\r\n}\r\nexport default Main;\r\n","const handleOriginalResponse = (res) => {\r\n        if (res.ok){\r\n            //console.log(res)\r\n            return res.json();  \r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`)\r\n        .catch((err)=>{\r\n         console.log(err)})\r\n  }\r\n\r\nclass Api {\r\n    constructor() {\r\n      //super(props);\r\n        this._urlCards = \"https://mesto.nomoreparties.co/v1/cohort-20/cards/\";\r\n        this._urlUserInfo = \"https://mesto.nomoreparties.co/v1/cohort-20/users/me/\";\r\n        this._headers = {\r\n            'content-type': 'application/json',\r\n            'authorization':'cc284eaa-be85-4547-943e-099c0aa22925'\r\n          };\r\n    }\r\n\r\n    getData(){\r\n       return fetch(this._urlCards, {\r\n            method: 'GET',\r\n            headers: this._headers\r\n        })\r\n        .then(handleOriginalResponse)\r\n    }\r\n\r\n    getUserInfo(){\r\n        return fetch(this._urlUserInfo, {\r\n             method: 'GET',\r\n             headers: this._headers\r\n         })\r\n         .then(handleOriginalResponse)\r\n     }\r\n\r\n     setUserInfo(data){\r\n        return fetch(this._urlUserInfo, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n              name: data.name,\r\n              about: data.about\r\n            })\r\n          }) \r\n          .then(handleOriginalResponse)\r\n     }\r\n\r\n     addNewCard(data){\r\n        return fetch(this._urlCards, {\r\n            method: 'POST',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n              name: data.place,\r\n              link: data.link\r\n            })\r\n          }) \r\n          .then(handleOriginalResponse)\r\n     }\r\n\r\n     changeLikeCardStatus(cardId, isLiked){\r\n         if(isLiked){\r\n            return fetch(`${this._urlCards}likes/${cardId}`, {\r\n                method: 'PUT',\r\n                headers: this._headers\r\n              }) \r\n              .then(handleOriginalResponse)\r\n         } else {\r\n            return fetch(`${this._urlCards}likes/${cardId}`, {\r\n                method: 'DELETE',\r\n                headers: this._headers\r\n              }) \r\n              .then(handleOriginalResponse)\r\n         }\r\n     }\r\n\r\n     deleteCard(cardId){\r\n        return fetch(`${this._urlCards}${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: this._headers\r\n          }) \r\n          .then(handleOriginalResponse)\r\n     }\r\n\r\n     addAvatar(link){\r\n        return fetch(`${this._urlUserInfo}avatar`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n              avatar: link,\r\n            })\r\n          }) \r\n          .then(handleOriginalResponse)\r\n     }\r\n}\r\nconst api = new Api();\r\nexport default api;\r\n","function ImagePopup(props){\r\n    //console.log(props.card)\r\n    return(\r\n        <div className={props.card ? 'popup popup_display_flex' : 'popup'} id=\"popup_image\">\r\n            <div className=\"popup__container\">\r\n                <button type=\"button\" className=\"popup__close-cross\" onClick={props.onClose}/>\r\n                <img className = 'popup__image' src={String(props.card.link)} alt='картинка'/> \r\n                <p className=\"popup__subtitle\">{props.card.name}</p>\r\n            </div>\r\n        </div>)\r\n    }\r\nexport default ImagePopup;","function PopupWithForm(props){\r\n    return(\r\n        <>\r\n            <div className={props.isOpen ? 'popup popup_display_flex' : 'popup'}>\r\n                <div className=\"popup__container\">\r\n                    <button type=\"button\" className=\"popup__close-cross\" onClick={props.onClose}/>\r\n                    <form id={props.name} name={props.name} onSubmit={props.onSubmit} className=\"popup__card\">\r\n                        <h2 className=\"popup__header\">{props.title}</h2>\r\n                        {props.children}\r\n                        <button disabled={props.isValid ? '' : 'disabled'} className={props.isValid ? 'popup__btn' : 'popup__btn popup__btn_disabled'} type=\"submit\">Сохранить</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\nexport default PopupWithForm;","import {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport React from \"react\";\r\n\r\nfunction EditProfilePopup(props){\r\n    const [name, setName] = React.useState('');\r\n    const [description, setDescription ] = React.useState('');\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const [nameErrorMessage, setNameErrorMessage] = React.useState({errorMessage:'', isValid:true});\r\n    const [jobErrorMessage, setJobErrorMessage] = React.useState({errorMessage:'', isValid:true});\r\n    const [isValid, setIsValid] = React.useState(true);\r\n\r\n    const nameRef = React.useRef();\r\n    const aboutRef = React.useRef();\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n      }, [currentUser]); \r\n\r\n    function setFormValid(){\r\n        setIsValid(nameErrorMessage.isValid && jobErrorMessage.isValid)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setFormValid()\r\n      }, [nameErrorMessage,jobErrorMessage])\r\n\r\n    React.useEffect(() => {\r\n        function resetFields(){\r\n            nameRef.current.value=name;\r\n            aboutRef.current.value=description;\r\n            setNameErrorMessage({errorMessage:'', isValid:true});\r\n            setJobErrorMessage({errorMessage:'', isValid:true})\r\n          }\r\n        resetFields()\r\n      }, [props.isOpen])\r\n\r\n    function setNameErrMessage(e) {\r\n    //setName(e.target.value);\r\n    setNameErrorMessage({errorMessage:e.target.validationMessage, isValid:e.target.checkValidity()})\r\n   // fromValidity()\r\n}\r\nfunction setAboutErrMessage(e) {\r\n    //setDescription(e.target.value);\r\n    setJobErrorMessage({errorMessage:e.target.validationMessage, isValid:e.target.checkValidity()})\r\n}\r\n\r\nfunction handleSubmit(e){\r\n    // Запрещаем браузеру переходить по адресу формы\r\n    e.preventDefault();\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    props.onUpdateUser({\r\n        name: nameRef.current.value,\r\n        about: aboutRef.current.value,\r\n    });\r\n}\r\n\r\nreturn(\r\n<PopupWithForm isValid={isValid} onSubmit={handleSubmit} onClose={props.onClose} isOpen={props.isOpen} name=\"editProfile\" title=\"Редактировать профиль\">\r\n            <div className=\"popup__field\">\r\n                <input ref={nameRef} className=\"popup__row\" name=\"name\" type=\"text\" minLength=\"2\" maxLength=\"40\" required id=\"name\" defaultValue={name} onChange={setNameErrMessage} placeholder=\"Ваше имя\"/>\r\n                <span className=\"popup__row-error_active name-error\">{nameErrorMessage.errorMessage}</span>\r\n            </div>\r\n            <div className=\"popup__field\">\r\n                <input ref={aboutRef} className=\"popup__row\" name=\"about\" type=\"text\" id=\"job\" minLength=\"2\" required maxLength=\"200\" defaultValue={description} onChange={setAboutErrMessage} placeholder=\"Чем занимаетесь?\"/>\r\n                <span className=\"popup__row-error_active job-error\">{jobErrorMessage.errorMessage}</span>\r\n            </div>\r\n</PopupWithForm>\r\n)}\r\n\r\nexport default EditProfilePopup;","import PopupWithForm from './PopupWithForm.js';\r\nimport React from \"react\";\r\nfunction EditAvatarPopup(props){\r\n  const [avatarErrorMessage, setAvatarErrorMessage] = React.useState({errorMessage:'', isValid:false});\r\n  const [isValid, setIsValid] = React.useState(true);\r\n    //console.log(props.isOpen)\r\n  const avatar = React.useRef();\r\n\r\n  function setFormValid(){\r\n    //console.log(avatarErrorMessage.isValid,avatarErrorMessage.errorMessage)\r\n    setIsValid(avatarErrorMessage.isValid)\r\n  }\r\n    React.useEffect(() => {\r\n      setFormValid()\r\n    }, [avatarErrorMessage])\r\n\r\n    React.useEffect(() => {\r\n      function resetFields(){\r\n        avatar.current.value=\"\";\r\n        setAvatarErrorMessage({errorMessage:'', isValid:false});\r\n      }\r\n      resetFields()\r\n    }, [props.isOpen])\r\n    \r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        props.onUpdateAvatar({\r\n          avatar: avatar.current.value,\r\n        });\r\n      }   \r\n\r\n      function setErrMessage(e) {\r\n        setAvatarErrorMessage({errorMessage:e.target.validationMessage, isValid:e.target.checkValidity()})\r\n    }\r\n\r\n    return(\r\n    <PopupWithForm isValid={isValid} onSubmit={handleSubmit} onClose={props.onClose} isOpen={props.isOpen} name=\"editAvatar\" title=\"Обновить аватар\">\r\n            <div className=\"popup__field\">\r\n                <input onChange={setErrMessage} ref={avatar} className=\"popup__row\" type=\"url\" name=\"link_avatar\" id=\"avatar\" required defaultValue=\"\" placeholder=\"Сылка на изображение\"/>\r\n                <span className=\"popup__row-error_active avatar-error\">{avatarErrorMessage.errorMessage}</span>\r\n            </div>  \r\n    </PopupWithForm>\r\n    )\r\n}\r\nexport default EditAvatarPopup;","import PopupWithForm from './PopupWithForm.js';\r\nimport React from \"react\";\r\nfunction AddPlacePopup(props){\r\n    const place = React.useRef();\r\n    const link = React.useRef();\r\nfunction handleSubmit(e){\r\n    e.preventDefault();\r\n    props.onAddPlaceSubmit(\r\n        {place:place.current.value, \r\n        link:link.current.value}\r\n        )\r\n    }\r\n    \r\nconst [placeErrorMessage, setPlaceErrorMessage] = React.useState({errorMessage:'', isValid:false});\r\nconst [linkErrorMessage, setLinkErrorMessage] = React.useState({errorMessage:'', isValid:false});\r\nconst [isValid, setIsValid] = React.useState(false);\r\n\r\n    function setFormValid(){\r\n        setIsValid(placeErrorMessage.isValid && linkErrorMessage.isValid);\r\n    }\r\n\r\n    React.useEffect(() => {\r\n    setFormValid()\r\n\r\n    }, [placeErrorMessage, linkErrorMessage])\r\n\r\n    React.useEffect(() => {\r\n        function resetFields(){\r\n            place.current.value=\"\";\r\n            link.current.value=\"\";\r\n            setPlaceErrorMessage({errorMessage:'', isValid:false});\r\n            setLinkErrorMessage({errorMessage:'', isValid:false})\r\n          }\r\n\r\n        resetFields()\r\n      }, [props.isOpen])\r\n\r\n    function setErrMessage(){\r\n        setPlaceErrorMessage({errorMessage:place.current.validationMessage, isValid:place.current.checkValidity()})\r\n        setLinkErrorMessage({errorMessage:link.current.validationMessage, isValid:link.current.checkValidity()})\r\n    }\r\n\r\nreturn(\r\n    <PopupWithForm isValid={isValid} onSubmit={handleSubmit} onClose={props.onClose} isOpen={props.isOpen} name=\"addCard\" title=\"Новое место\">\r\n            <div className=\"popup__field\">\r\n                <input onChange={setErrMessage} ref={place} className=\"popup__row\" type=\"text\" minLength=\"2\" maxLength=\"30\" name=\"place\" id=\"place\"  placeholder=\"Название\" required/>\r\n                <span className=\"popup__row-error_active place-error\">{placeErrorMessage.errorMessage}</span>\r\n            </div>\r\n            <div className=\"popup__field\">\r\n                <input onChange={setErrMessage} ref={link} className=\"popup__row\" type=\"url\" name=\"link\" id=\"link\"  placeholder=\"Ссылка на картинку\" required/>\r\n                <span className=\"popup__row-error_active link-error\">{linkErrorMessage.errorMessage}</span>\r\n            </div>\r\n    </PopupWithForm>\r\n)\r\n}\r\nexport default AddPlacePopup","import PopupWithForm from './PopupWithForm.js';\r\nimport React from \"react\";\r\nfunction ConformPopup(props){\r\n    return(\r\n        <PopupWithForm onSubmit={props.onSubmit} isValid={true} onClose={props.onClose} isOpen={props.isOpen} name=\"deleteCard\" title=\"Вы уверены?\"/>\r\n    )\r\n}\r\nexport default ConformPopup;","import { Link, withRouter } from 'react-router-dom';\r\nimport React from \"react\";\r\nfunction Register(props){\r\n    const emailInput = React.useRef();\r\n    const passwordInput = React.useRef();\r\n\r\n    function handleSubmit(e){\r\n        e.preventDefault();\r\n        props.onRegister(passwordInput.current.value,emailInput.current.value)\r\n        };\r\n        \r\n    return(\r\n        <main className=\"content\">\r\n                <div className=\"popup__container\">\r\n                    <form  className=\"popup__card_theme_dark\">\r\n                        <h2 className=\"popup__header\">Регистрация</h2>\r\n                        <div className=\"popup__field\">\r\n                            <input ref={emailInput} defaultValue=\"\" className=\"popup__row_theme_dark\" name=\"email\" type=\"email\" minLength=\"2\" maxLength=\"40\" required id=\"Email\" placeholder=\"Email\"/>\r\n                            <span className=\"popup__row-error_active name-error\"></span>\r\n                        </div>\r\n                        <div className=\"popup__field\">\r\n                            <input ref={passwordInput} defaultValue=\"\" className=\"popup__row_theme_dark\" name=\"password\" type=\"password\" minLength=\"2\" maxLength=\"40\" required id=\"password\"  placeholder=\"Пароль\"/>\r\n                            <span className=\"popup__row-error_active name-error\"></span>\r\n                        </div>\r\n                        <button onClick={handleSubmit} className='popup__btn_theme_dark' type=\"submit\">Зарегистрироваться</button>\r\n                        <Link to=\"sign-in\"><span className=\"popup__login\">Уже зарегистрированы? Войти</span></Link>\r\n                    </form>\r\n                </div>\r\n        </main>\r\n    )\r\n}\r\nexport default Register;","import React from \"react\";\r\nfunction Login(props){\r\n    const emailInput = React.useRef();\r\n    const passwordInput = React.useRef();\r\n\r\n    function handleSubmit(e){\r\n        e.preventDefault();\r\n        if ((passwordInput.current.value !== '') && (emailInput.current.value !== '')){\r\n           props.onLogIn(passwordInput.current.value,emailInput.current.value) \r\n        }\r\n        };\r\n\r\n    return(\r\n        <main className=\"content\">\r\n                <div className=\"popup__container\">\r\n                    <form  className=\"popup__card_theme_dark\">\r\n                        <h2 className=\"popup__header\">Вход</h2>\r\n                        <div className=\"popup__field\">\r\n                            <input ref={emailInput} className=\"popup__row_theme_dark\" required type=\"email\" minLength=\"2\" maxLength=\"40\" placeholder=\"Email\"/>\r\n                            <span className=\"popup__row-error_active name-error\"></span>\r\n                        </div>\r\n                        <div className=\"popup__field\">\r\n                            <input ref={passwordInput} className=\"popup__row_theme_dark\" required type=\"password\" minLength=\"2\" maxLength=\"40\" placeholder=\"Пароль\"/>\r\n                            <span className=\"popup__row-error name-error\"></span>\r\n                        </div>\r\n                        <button onClick={handleSubmit} className='popup__btn_theme_dark' type=\"submit\">Войти</button>\r\n                    </form>\r\n                </div>\r\n        </main>\r\n    )\r\n}\r\nexport default Login;","export default __webpack_public_path__ + \"static/media/Err.df8eddf6.svg\";","export default __webpack_public_path__ + \"static/media/Ok.1b6082f8.svg\";","import Err from \"../images/Err.svg\";\r\nimport Ok from \"../images/Ok.svg\";\r\nfunction InfoTooltip(props){\r\n    //responsePic = \r\n    return(\r\n        <div className={props.isOpen ? 'popup popup_display_flex' : 'popup'}>\r\n                <div className=\"popup__container\">\r\n                    <button type=\"button\" className=\"popup__close-cross\" onClick={props.onClose}/>\r\n                    <div className=\"popup__card\">\r\n                        <img src={props.isOk ? Ok : Err} className=\"popup__response\"/>\r\n                        <p className=\"popup__response-text\">{props.isOk ? \"Вы успешно зарегистрировались!\" : \"Что-то пошло не так! Попробуйте ещё раз.\"}</p>\r\n                    </div>\r\n                </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default InfoTooltip;","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\n// этот компонент принимает другой компонент в качестве пропса\r\n// он также может взять неограниченное число пропсов и передать их новому компоненту\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {() =>\r\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\r\n      }\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;","\r\n//import './App.css';\r\nimport * as auth from '../utils/auth';\r\nimport '../index.css';\r\nimport Header from './Header.js';\r\nimport '../index.css';\r\nimport Footer from './Footer.js';\r\nimport Main from './Main.js';\r\nimport api from \"../utils/api\";\r\nimport ImagePopup from './ImagePopup.js';\r\nimport EditProfilePopup from './EditProfilePopup.js';\r\nimport EditAvatarPopup from './EditAvatarPopup.js';\r\nimport AddPlacePopup from './AddPlacePopup.js';\r\nimport ConfirmPopup from './ConfirmPopup.js';\r\nimport Register from './Register.js';\r\nimport Login from './Login.js';\r\nimport InfoTooltip from './InfoTooltip.js';\r\nimport ProtectedRoute from './ProtectedRoute.js';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nimport React, { useEffect } from \"react\";\r\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\r\n\r\nfunction App() {\r\n    const [currentUser, setCurrentUser] = React.useState([]);\r\n    const [isEditProfilePopupOpen,setEditProfilePopupOpen] = React.useState(false);\r\n    const [isAddPlacePopupOpen,setAddPlacePopupOpen] = React.useState(false);\r\n    const [isEditAvatarPopupOpen,setEditAvatarPopupOpen] = React.useState(false);\r\n    const [isConfirmPopupOpen,setConfirmPopupOpen] = React.useState(false);\r\n    const [isInfoTooltipOpen, setInfoTooltipOpen] = React.useState(false);\r\n    const [selectedCard, setSelectedCard] = React.useState('');\r\n    const [cardToDelete, setCardToDelete] = React.useState(null);\r\n    const [cards, setCards] = React.useState([])\r\n    //const [headerTitle, setHeaderTitle] = React.useState([]);\r\n    const [loggedIn, setLoggedIn] = React.useState(false);\r\n    const [tooltip, setTooltip] = React.useState(false);\r\n    const [email, setEmail] = React.useState(null);\r\n    const history = useHistory();\r\n\r\n    useEffect(()=>{\r\n        api.getData()\r\n            .then((cardsData)=> {\r\n                setCards(cardsData);\r\n            })\r\n    },[]);\r\n\r\n    useEffect(()=>{\r\n        tokenCheck();\r\n    },[]);\r\n\r\n    function signOut(){\r\n        localStorage.removeItem('jwt');\r\n        setLoggedIn(false);\r\n        history.push('/sign-in');\r\n        console.log(localStorage)\r\n      }\r\n\r\n    function tokenCheck () {\r\n        // если у пользователя есть токен в localStorage,\r\n        // эта функция проверит валидность токена\r\n        const jwt = localStorage.getItem('jwt');\r\n        //console.log('Токен',jwt)\r\n        if (jwt){\r\n          // проверим токен\r\n          auth.getToken(jwt)\r\n          .then((res) => {\r\n            if (res){\r\n                setEmail(res.data.email)\r\n                //console.log('Валидный токен => Авторизуем')\r\n                //console.log('Авторизуем')\r\n                // авторизуем пользователя\r\n                setLoggedIn(true);\r\n            }\r\n          }); \r\n        }\r\n      } \r\n\r\n    \r\n    function handleCardLike(card) {\r\n        // Снова проверяем, есть ли уже лайк на этой карточке\r\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n        // Отправляем запрос в API и получаем обновлённые данные карточки\r\n        api.changeLikeCardStatus(card._id, !isLiked)\r\n        .then((newCard) => {\r\n            console.log(newCard);\r\n            const newCards = cards.map((c) => c._id === card._id ? newCard : c)\r\n            setCards(newCards)\r\n            });\r\n    } \r\n\r\n    function handleCardDelete(card){\r\n        setCardToDelete(card);\r\n        setConfirmPopupOpen(!isConfirmPopupOpen)\r\n    }\r\n\r\n    function confirmDeleteCard(e){\r\n        e.preventDefault();\r\n         api.deleteCard(cardToDelete._id)\r\n        .then((resp) => {\r\n            const newCards = cards.filter(cardR => cardR._id !== cardToDelete._id);\r\n            setCards(newCards);\r\n            closeAllPopups();\r\n            });\r\n    }\r\n\r\n    useEffect(()=>{\r\n        api.getUserInfo()\r\n        .then((userInfo)=> {\r\n           setCurrentUser(userInfo);\r\n        })\r\n   },[])\r\n\r\n   //console.log(currentUser);\r\n\r\n    function handleCardClick (selectedCard){\r\n        setSelectedCard(selectedCard)\r\n    }\r\n\r\n    function closeAllPopups(){\r\n        setEditAvatarPopupOpen(false);\r\n        setEditProfilePopupOpen(false);\r\n        setAddPlacePopupOpen(false);\r\n        setSelectedCard('');\r\n        setConfirmPopupOpen(false);\r\n        setInfoTooltipOpen(false);\r\n    }\r\n\r\n    function handleEditAvatarClick(){\r\n        setEditAvatarPopupOpen(!isEditAvatarPopupOpen)\r\n    }\r\n\r\n    function handleEditProfileClick(){\r\n        setEditProfilePopupOpen(!isEditProfilePopupOpen)\r\n    }\r\n\r\n    function handleAddPlaceClick(){\r\n        setAddPlacePopupOpen(!isAddPlacePopupOpen)\r\n    }\r\n\r\n    React.useEffect(()=>{\r\n        //console.log('loggedIn ?',loggedIn)\r\n        if (loggedIn){\r\n            history.push('/profile');\r\n            console.log(\"Переправка на профиль\")\r\n        }\r\n    },[loggedIn, email])\r\n\r\n    function handleLogIn(password, email){\r\n        auth.logIn(password, email)\r\n        .then((data)=>{\r\n            if (data === 'Err'){\r\n            } else {\r\n                //setTooltip(!tooltip)\r\n                //console.log(data.token)\r\n                localStorage.setItem('jwt', data.token);\r\n                setLoggedIn(true);\r\n                //console.log(\"эх\",loggedIn)\r\n                history.push('/profile');\r\n            }\r\n        })\r\n    }\r\n\r\n    function handleRegistration(password, email){\r\n        //console.log(passwordInput, emailInput);\r\n        auth.register(password, email)\r\n            .then((data)=>{\r\n                if (data === 'Err'){\r\n                    setTooltip(false)\r\n                    setInfoTooltipOpen(true);\r\n                } else {\r\n                    setTooltip(true)\r\n                    setInfoTooltipOpen(true);\r\n                    history.push('/sign-in');\r\n                }\r\n            })\r\n    }\r\n\r\n    function handleUpdateUser(data){\r\n        api.setUserInfo(data)\r\n        .then((resp)=> {\r\n            setCurrentUser(resp);\r\n            closeAllPopups()})\r\n    }\r\n\r\n    function handleUpdateAvatar(data){\r\n        api.addAvatar(data.avatar).then((resp)=> {\r\n            //console.log(resp);\r\n            setCurrentUser(resp)\r\n            closeAllPopups();\r\n        })\r\n    }\r\n\r\n    function handleAddPlaceSubmit(data){\r\n        api.addNewCard(data)\r\n        .then((resp)=>{\r\n            //console.log(resp);\r\n            setCards([resp, ...cards]);\r\n            closeAllPopups();\r\n        })\r\n    }\r\n\r\n    function overlayClose(e){\r\n        //console.log(e.target)\r\n        if(isEditAvatarPopupOpen || isEditProfilePopupOpen || isAddPlacePopupOpen || isConfirmPopupOpen || selectedCard){\r\n            //console.log(e.target);\r\n            if(e.target.classList.contains('popup')){\r\n            closeAllPopups();\r\n        }\r\n        }\r\n        \r\n    }\r\n\r\n    function escapeClose(e){\r\n        //console.log(e.key)\r\n            if(e.key === 'Escape'){\r\n            closeAllPopups();\r\n            }\r\n    }\r\n\r\n  return (\r\n<CurrentUserContext.Provider value={currentUser}>\r\n    <meta charSet=\"UTF-8\"/>\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\r\n    <title>Mesto</title>\r\n    <div className=\"main\" tabIndex={0} onKeyDown={escapeClose} onClick={overlayClose}>\r\n        {loggedIn && <Header email={email} loggedIn={loggedIn} title={\"Выйти\"} link='/sign-in' signOut={signOut}/>}\r\n        <ImagePopup onClose={closeAllPopups} card={selectedCard}/>\r\n        <EditAvatarPopup onUpdateAvatar ={handleUpdateAvatar} isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} />\r\n        <EditProfilePopup onUpdateUser ={handleUpdateUser} isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} /> \r\n        <AddPlacePopup onAddPlaceSubmit ={handleAddPlaceSubmit} isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} />\r\n        <ConfirmPopup onSubmit={confirmDeleteCard} onClose={closeAllPopups} isOpen={isConfirmPopupOpen}/>\r\n        <Switch>\r\n                <Route exact path=\"/\">\r\n                    {loggedIn ? <Redirect to=\"/profile\" /> : <Redirect to=\"/sign-in\" />}\r\n                </Route> \r\n                <ProtectedRoute path=\"/profile\" loggedIn={loggedIn} component={Main}\r\n                    cards={cards} \r\n                    onCardLike={handleCardLike} \r\n                    onCardDelete={handleCardDelete} \r\n                    onCardClick={handleCardClick} \r\n                    onEditProfile={handleEditProfileClick} \r\n                    onAddPlace={handleAddPlaceClick} \r\n                    onEditAvatar={handleEditAvatarClick}\r\n                    />\r\n                <Route path=\"/sign-up\">\r\n                    <InfoTooltip isOk={tooltip} isOpen={isInfoTooltipOpen} onClose={closeAllPopups}/>\r\n                    <Header title={'Войти'} link='/sign-in'/>\r\n                    <Register onRegister={handleRegistration}/>\r\n                </Route>\r\n                <Route path=\"/sign-in\">\r\n                    <InfoTooltip isOk={tooltip} isOpen={isInfoTooltipOpen} onClose={closeAllPopups}/>\r\n                    <Header title={'Регистрация'} link='/sign-up'/>\r\n                    <Login onLogIn={handleLogIn}/>\r\n                </Route>\r\n        </Switch>\r\n        <Footer />\r\n\r\n    </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter basename=\"/mesto-react\"> \r\n    <App />\r\n    </BrowserRouter> \r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}